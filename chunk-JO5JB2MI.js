import{a as K,b as Q}from"./chunk-DGHNF5Z2.js";import"./chunk-6SEJQAAZ.js";import{a as G}from"./chunk-6KFB6HDE.js";import{g as O}from"./chunk-SEKC46MC.js";import{a as L}from"./chunk-QMAPNKEB.js";import{a as q}from"./chunk-LM6MGTWJ.js";import{a as H,b as J}from"./chunk-6SO5ROY5.js";import{Ba as z,G as A,N,ma as U,na as V,oa as R,pa as S,q as M}from"./chunk-NN2CTZ2E.js";import{Bb as P,C as $,Cb as c,Kb as d,Lb as b,Mb as C,Ra as r,Sa as u,Tb as x,_ as v,ac as l,bc as p,fb as g,ia as w,ib as _,ja as I,k as y,nb as f,pb as j,qb as D,rb as F,sb as o,tb as a,ub as m,x as T,yb as E}from"./chunk-7ILHC6KT.js";import"./chunk-MG3ERZGY.js";var B=(n=>(n[n.AwaitingPayment=0]="AwaitingPayment",n[n.Confirmed=1]="Confirmed",n[n.Cancelled=2]="Cancelled",n[n.Completed=3]="Completed",n))(B||{});function Z(e,t){e&1&&(m(0,"p-chip",1),l(1,"translate")),e&2&&_("label",p(1,1,"awaiting_payment"))}function ee(e,t){e&1&&(m(0,"p-chip",2),l(1,"translate")),e&2&&_("label",p(1,1,"confirmed"))}function te(e,t){e&1&&(m(0,"p-chip",3),l(1,"translate")),e&2&&_("label",p(1,1,"cancelled"))}function ie(e,t){e&1&&(m(0,"p-chip",4),l(1,"translate")),e&2&&_("label",p(1,1,"completed_feminine"))}var h=class e{status;BookingStatus=B;static \u0275fac=function(i){return new(i||e)};static \u0275cmp=v({type:e,selectors:[["app-booking-status-badge"]],inputs:{status:"status"},standalone:!0,features:[x],decls:5,vars:1,consts:[[1,"abms-booking-status-badge"],["icon","pi pi-wallet",1,"abms-booking-status-badge--awaiting-payment",3,"label"],["icon","pi pi-check",1,"abms-booking-status-badge--confirmed",3,"label"],["icon","pi pi-times",1,"abms-booking-status-badge--cancelled",3,"label"],["icon","pi pi-history",1,"abms-booking-status-badge--completed",3,"label"]],template:function(i,s){if(i&1&&(o(0,"div",0),g(1,Z,2,3,"p-chip",1)(2,ee,2,3,"p-chip",2)(3,te,2,3,"p-chip",3)(4,ie,2,3,"p-chip",4),a()),i&2){let n;r(),f((n=s.status)===s.BookingStatus.AwaitingPayment?1:n===s.BookingStatus.Confirmed?2:n===s.BookingStatus.Cancelled?3:n===s.BookingStatus.Completed?4:-1)}},dependencies:[Q,K,S]})};function ne(e,t){if(e&1&&(o(0,"div",6)(1,"p",7),d(2),a(),m(3,"app-booking-status-badge",8),a()),e&2){let i=c().$implicit;r(2),b(i.accommodationName),r(),_("status",i.bookingStatus)}}function oe(e,t){if(e&1&&(o(0,"div",9)(1,"div",10),m(2,"i",11),o(3,"p",12),d(4),l(5,"translate"),a(),o(6,"p"),d(7),a()(),o(8,"div",10),m(9,"i",13),o(10,"p",12),d(11),l(12,"translate"),a(),o(13,"p"),d(14),a()(),o(15,"div",10),m(16,"i",14),o(17,"p",12),d(18),l(19,"translate"),a(),o(20,"p"),d(21),a()()()),e&2){let i=c().$implicit;r(4),C(" ",p(5,6,"check_in_date"),": "),r(3),b(i.startDate),r(4),C(" ",p(12,8,"check_out_date"),": "),r(3),b(i.endDate),r(4),C(" ",p(19,10,"guests_amount"),": "),r(3),b(i.guests)}}function ae(e,t){if(e&1){let i=E();o(0,"p-button",19),l(1,"translate"),P("onClick",function(){w(i);let n=c(2).$implicit,k=c(3);return I(k.onCancel(n.id))}),a()}e&2&&_("label",p(1,2,"cancel_booking"))("outlined",!0)}function re(e,t){if(e&1){let i=E();o(0,"div",15)(1,"div",16)(2,"p-button",17),l(3,"translate"),P("onClick",function(){w(i);let n=c().$implicit,k=c(3);return I(k.onAccommodationDetails(n.accommodationId))}),a(),g(4,ae,2,4,"p-button",18),a()()}if(e&2){let i=c().$implicit,s=c(3);r(2),_("label",p(3,3,"view_accommodation"))("outlined",!0),r(2),f(s.canCancelBooking(i.bookingStatus)?4:-1)}}function le(e,t){e&1&&(o(0,"p-panel"),g(1,ne,4,2,"ng-template",3)(2,oe,22,12,"ng-template",4)(3,re,5,5,"ng-template",5),a())}function pe(e,t){if(e&1&&D(0,le,4,0,"p-panel",null,j),e&2){let i=c();F(i)}}function se(e,t){e&1&&(o(0,"div",2)(1,"p",20),d(2),l(3,"translate"),a(),o(4,"p"),d(5),l(6,"translate"),a()()),e&2&&(r(2),b(p(3,2,"no_bookings")),r(3),C(" ",p(6,4,"add_booking_to_see_it_here")," "))}function me(e,t){e&1&&g(0,pe,2,0)(1,se,7,6,"div",2),e&2&&f(t.length?0:1)}function ce(e,t){e&1&&(o(0,"div",1),m(1,"app-loader"),a())}var W=class e{constructor(t,i,s,n,k){this.userService=t;this.router=i;this.toastService=s;this.translation=n;this.confirmationService=k}bookings$;ngOnInit(){this.bookings$=this.userService.getUserBookings$().pipe($(1e3),T(()=>(this.toastService.showError(this.translation.instant("error_occured"),this.translation.instant("error_occured_try_again_later")),y())))}onCancel(t){this.confirmationService.confirm({header:this.translation.instant("confirmation_required"),message:this.translation.instant("cancel_booking_confirmation"),accept:()=>this.cancelBooking(t),reject:()=>{},acceptLabel:this.translation.instant("yes"),rejectLabel:this.translation.instant("no")})}cancelBooking(t){this.userService.cancelBooking$(t).pipe(T(()=>(this.toastService.showError(this.translation.instant("error_occured"),this.translation.instant("error_occured_try_again_later")),y()))).subscribe(()=>{this.bookings$=this.userService.getUserBookings$(),this.toastService.showSuccess(this.translation.instant("success"),this.translation.instant("booking_cancelled_successfully"))})}onAccommodationDetails(t){this.router.navigate([L.ACCOMMODATIONS,t])}canCancelBooking(t){return t===0||t===1}static \u0275fac=function(i){return new(i||e)(u(z),u(O),u(G),u(R),u(A))};static \u0275cmp=v({type:e,selectors:[["app-bookings"]],standalone:!0,features:[x],decls:4,vars:3,consts:[[1,"abms-bookings","flex","flex-column","gap-3"],[1,"w-full","flex","justify-content-center","mt-8"],[1,"w-full","flex","flex-column","justify-content-center","align-items-center","gap-2","mt-8"],["pTemplate","header"],["pTemplate","content"],["pTemplate","footer"],[1,"flex","w-full","justify-content-between","align-items-center"],[1,"text-lg","font-semibold"],[3,"status"],[1,"flex","flex-column","gap-2"],[1,"flex","gap-2"],[1,"pi","pi-calendar-plus"],[1,"abms-bookings__info-label"],[1,"pi","pi-calendar-minus"],[1,"pi","pi-users"],[1,"flex","w-full"],[1,"flex","gap-2","ml-auto"],["icon","pi pi-home","iconPos","right",3,"onClick","label","outlined"],["icon","pi pi-times","iconPos","right","severity","danger",3,"label","outlined"],["icon","pi pi-times","iconPos","right","severity","danger",3,"onClick","label","outlined"],[1,"text-xl","font-semibold"]],template:function(i,s){if(i&1&&(o(0,"div",0),g(1,me,2,1),l(2,"async"),g(3,ce,2,0,"div",1),a()),i&2){let n;r(),f((n=p(2,1,s.bookings$))?1:3,n)}},dependencies:[M,q,J,H,N,V,U,S,h],styles:[".abms-bookings__booking-info[_ngcontent-%COMP%]{display:grid;gap:1rem}.abms-bookings__info-label[_ngcontent-%COMP%]{justify-self:end}"]})};export{W as BookingsComponent};
